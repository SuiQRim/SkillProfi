<!doctype html>
<html lang="eu">

<head>
    <meta charset="utf-8" />
    <title>Main</title>

    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="../Styles/MainStyle.css" />
    <link rel="stylesheet" href="../Styles/Block.css" />
    <link rel="stylesheet" href="../Styles/Header.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <div id="header" class="header">
        <div class="topnav">
            <div>
                <a href="Index.html">Main</a>
                <a href="Services.html">Services</a>
                <a href="Projects.html">Projects</a>
                <a class="active" href="Blogs.html">Blogs</a>
                <a href="Contacts.html">Contacts</a>
            </div>
        </div>

        <div class="slogan">
            <p>"Expanding the possibilities"</p>
        </div>

        <div>
            <img class="image">
        </div>

    </div>

    <div class="content">
        <div id="blog" style="min-height: 520px;">
            <script>
                var id = getUrlVars()["id"];

                function getUrlVars() {
                    var vars = {};
                    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m, key, value) {
                        vars[key] = value;
                    });
                    return vars;
                }

                $.ajax({
                    url: `https://localhost:7120/api/Blogs/${id}?isPictureNeed=true`,
                    type: 'get',
                    success: function(data) {

                        let div = document.createElement('div');

                        let img;

                        if(data["pictureBytePresentation"] == null) {
                            img = "../Images/ImageError.png";
                        }
                        else {
                            img = `data:image/png;base64,${data["pictureBytePresentation"]}`;
                        }

                        div.id = data["id"];
                        div.innerHTML = `

                            <div class="title">${data["title"]}

                            </div>
                            
                            <div>
                                <div class="image-block-content">
                                    <img src="${img}">
                                </div>
                                <div class="description">
                                    <a>${data["description"]}</a>
                                </div>
                            </div>
                            `
                        document.getElementById("blog").append(div);
                    }
                });
            </script>

        </div>
        <button class="button" style="float: right;" onclick="document.location='Blogs.html'">
            Назад
        </button>
        <script>
            function comeBackToBlogMenu() {
                window.location.href = 'Blogs.html';
            }
        </script>
    </div>
</body>

</html>