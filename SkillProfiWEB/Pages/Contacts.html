<!doctype html>
<html lang="eu">

<head>
    <meta charset="utf-8" />
    <title>Main</title>

    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="../Styles/MainStyle.css" />
    <link rel="stylesheet" href="../Styles/Block.css" />
    <link rel="stylesheet" href="../Styles/Header.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <div id="header" class="header">
        <div class="topnav">
            <div>
                <a href="Index.html">Main</a>
                <a href="Services.html">Services</a>
                <a href="Projects.html">Projects</a>
                <a href="Blogs.html">Blogs</a>
                <a class="active" href="Contacts.html">Contacts</a>
            </div>
        </div>

        <div class="slogan">
            <p>"Expanding the possibilities"</p>
        </div>

        <div>
            <img class="image">
        </div>

    </div>

    <div class="content"> 

        <div class="title">
            <a>Contacts</a>
        </div>

        <div id="contacts" class="contacts">
            <div id="map" class="map">
            </div>
        </div>
        <script>

            $.ajax({
                url: 'https://localhost:7120/api/Contacts',
                type: 'get',
                success: function(data) {

                    createListOfLinks(data["socialNetworks"]);

                    let div = document.createElement('div');
                        div.className = "contacts-data";
                        div.innerHTML = `
                            <div>${data["adress"]}</div>
                            <div>${data["phoneNumber"]}</div>
                            <div>${data["email"]}</div>
                            `;

                        document.getElementById("contacts").append(div);

                        createMap(data["linkToMapContructor"]);
                }
            });

            function createMap(linkToContructor)
            {
                let frame = document.createElement('iframe');
                frame.setAttribute('width','500');
                frame.setAttribute('height','400');
                frame.setAttribute('frameborder','0');
                frame.setAttribute('src', linkToContructor);
                
                document.getElementById("map").append(frame);
            }

            function createListOfLinks(list)
            {
                list.forEach(socNet => {
                    let div = document.createElement('div');
                    div.className = "social-network";
                    div.innerHTML = `
                        <a href="${socNet["link"]}"><img src="data:image/png;base64,${socNet["pictureBytePresentation"]}"></a>
                        `;

                    document.getElementById("contacts").append(div);
                });
            }
              
        </script>

       
    </div>

</body>
</html>