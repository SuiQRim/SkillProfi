@{
    ViewData["Title"] = "Main";
}

<button class="button" onclick="openConsultationPanel('consultation')">Submit your application</button>

<div id="consultation" style="display: none; margin: 10px;">

	<div class="title-mini">
		<p>Ask a question or submit application</p>
	</div>

	<div>

		<form asp-controller="Main" asp-action="AddConsultation" method="post">

			<div>
				<input id="name" type="text" title="Имя" name="name" placeholder="Name" required>
			</div>


			<div>
				<input id="email" type="text" title="E-mail" name="email" placeholder="E-mail" required>
			</div>		
			
			<textarea id="description" placeholder="Description" name="description" required></textarea>

			<button class="button" type="submit" style="float:right;">Отправить</button>

		</form>





		<script>
			function sendConsultation() {

				let consultation = {
					name: document.getElementById("name").value,
					eMail: document.getElementById("email").value,
					description: document.getElementById("description").value,
				}

				console.log(JSON.stringify(consultation));

				$.ajax({
					headers: {
						'Accept': 'application/json',
						'Content-Type': 'application/json'
					},
					url: 'https://localhost:7120/api/Consultations',
					type: 'post',
					data: JSON.stringify(consultation),
					success: function(data) {
						alert(data);
					}
				});
			}


			function openConsultationPanel(element) {

				var e = document.getElementById(element);
				if (e.style.display == 'block')
					e.style.display = 'none';
				else
					e.style.display = 'block';

			}
		</script>

	</div>
</div>
